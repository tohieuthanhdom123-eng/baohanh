<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>KOI - Kích hoạt bảo hành</title>
  <style>
    :root{
      --koi-pink:#d63384;
      --koi-pink-2:#ff85a2;
      --bg:#fff5f8;
      --card:#fff0f6;
      --text:#222;
      --muted:#666;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
      background: var(--bg);
      -webkit-text-size-adjust:100%;
    }

    /* Header */
    header{
      position:fixed; inset:0 auto auto 0;
      width:100%;
      background:#f8bbd0;
      color:#fff;
      padding:12px 16px;
      font-weight:700;
      z-index:10;
      box-shadow:0 2px 10px rgba(0,0,0,.06);
    }

    /* Main */
    .container{
      padding:88px 16px 32px;   /* chừa chỗ cho header */
      text-align:center;
      max-width:680px;
      margin:0 auto;
    }
    h1{
      margin:0 0 10px;
      color:var(--koi-pink);
      font-size:28px;
      line-height:1.25;
    }
    .desc{
      color:var(--muted);
      margin:0 0 18px;
      font-size:15px;
    }
    .form{
      display:flex; gap:8px; justify-content:center;
      max-width:480px; margin:0 auto 18px;
    }
    .form input{
      flex:1; min-width:0;
      height:44px; padding:0 12px;
      font-size:16px; text-align:center;
      background:#fff; border:1px solid #ddd; border-radius:10px;
      outline:none;
    }
    .form button{
      height:44px; padding:0 18px;
      border:none; border-radius:10px; color:#fff; font-weight:700; font-size:16px;
      background: linear-gradient(90deg, var(--koi-pink-2), var(--koi-pink));
    }
    @media (max-width:480px){
      .form{ flex-direction:column; }
      .form button{ width:100%; }
    }

    /* Overlay full màn hình */
    .overlay{
      position:fixed; inset:0;
      background:#fff;
      display:none;
      z-index:100;
      /* chiều cao an toàn cho iOS */
      min-height: 100svh;
      padding:16px;
    }
    .overlay .content{
      height:100%;
      max-width:560px;
      margin:0 auto;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      text-align:center;
      gap:12px;
      padding:12px;
    }
    .success-title{
      font-size:26px; line-height:1.3;
      color:var(--koi-pink); font-weight:800;
      margin:0;
    }
    .divider{
      width:90px; height:4px; border-radius:999px;
      background:linear-gradient(90deg,var(--koi-pink-2),var(--koi-pink));
      margin:6px 0 8px;
    }

    /* dòng thông tin: dùng SVG + flex để không lệch */
    .info-line{
      display:flex; align-items:center; justify-content:center; gap:8px;
      font-size:16px; color:var(--text);
    }
    .info-line strong{font-weight:700}

    .note{
      margin-top:6px; color:var(--muted); line-height:1.5;
    }
    .note a{ color:var(--koi-pink); font-weight:700; text-decoration:none; }

    .btn{
      display:inline-block; padding:12px 18px; border-radius:12px;
      color:#fff; text-decoration:none; font-weight:700;
      background: linear-gradient(90deg, var(--koi-pink-2), var(--koi-pink));
      margin-top:6px;
    }
    .close{
      margin-top:8px; padding:10px 18px; border-radius:10px; background:#e9e9e9; color:#333; display:inline-block;
    }
    .thanks{
      margin-top:10px; color:var(--koi-pink); font-style:italic;
    }

    /* Confetti canvas */
    #confettiCanvas{
      position:fixed; inset:0; pointer-events:none; z-index:120;
    }
  </style>
</head>
<body>
  <header>KOI - Kích hoạt bảo hành</header>

  <main class="container">
    <h1>Kích hoạt bảo hành</h1>
    <p class="desc">Vui lòng nhập mã đơn hàng được shop cung cấp để kích hoạt bảo hành</p>

    <div class="form">
      <input id="orderCode" placeholder="Nhập mã đơn hàng..." />
      <button type="button" onclick="activate()">Kích hoạt</button>
    </div>
  </main>

  <!-- Overlay -->
  <section id="overlay" class="overlay" aria-hidden="true">
    <div class="content" role="dialog" aria-modal="true">
      <h2 class="success-title">Kích hoạt bảo hành thành công!</h2>
      <div class="divider"></div>

      <p class="info-line">
        <!-- ID icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
          <rect x="2" y="4" width="20" height="16" rx="6" fill="#E9D5FF"/>
          <text x="12" y="16" text-anchor="middle" font-size="10" font-weight="700" fill="#6B21A8">ID</text>
        </svg>
        Mã đơn hàng: <strong id="showOrder">—</strong>
      </p>

      <p class="info-line">
        <!-- Calendar icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
          <rect x="3" y="5" width="18" height="16" rx="3" fill="#FFE4EA" stroke="#F8A1B8"/>
          <rect x="3" y="5" width="18" height="4" fill="#F8A1B8"/>
          <rect x="6" y="3" width="2" height="4" rx="1" fill="#D63384"/>
          <rect x="16" y="3" width="2" height="4" rx="1" fill="#D63384"/>
        </svg>
        Ngày kích hoạt: <strong id="showDate">—</strong>
      </p>

      <p class="note">
        Hãy chụp màn hình thông báo này và gửi lại fanpage<br />
        <a href="https://www.facebook.com/koishopQuatang" target="_blank" rel="noopener">KOI Quà Tặng</a>
      </p>

      <a class="btn" href="https://m.me/koishopQuatang" target="_blank" rel="noopener">Chat với fanpage</a>
      <a class="close" href="javascript:void(0)" onclick="closePopup()">Đóng</a>
      <div class="thanks">Cảm ơn bạn đã tin tưởng KOI</div>
    </div>
  </section>

  <canvas id="confettiCanvas"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    function activate(){
      const input = document.getElementById('orderCode');
      const code = (input.value || '').trim();
      if(!code){ alert('Vui lòng nhập mã đơn hàng!'); return; }

      document.getElementById('showOrder').textContent = code;
      const today = new Date();
      const d = today.toLocaleDateString('vi-VN',{day:'2-digit',month:'2-digit',year:'numeric'});
      document.getElementById('showDate').textContent = d;

      const overlay = document.getElementById('overlay');
      overlay.style.display = 'block';
      overlay.setAttribute('aria-hidden','false');

      // Confetti
      const canvas = document.getElementById('confettiCanvas');
      const blast = confetti.create(canvas, { resize:true, useWorker:true });
      for (let i=0;i<3;i++){
        setTimeout(()=>blast({ particleCount:110, spread:120, origin:{x:0.5,y:0.5} }), i*450);
      }
    }

    function closePopup(){
      const overlay = document.getElementById('overlay');
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden','true');
    }
  </script>
</body>
</html>
